(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{342:function(t,e,n){var map={"./af":194,"./af.js":194,"./ar":195,"./ar-dz":196,"./ar-dz.js":196,"./ar-kw":197,"./ar-kw.js":197,"./ar-ly":198,"./ar-ly.js":198,"./ar-ma":199,"./ar-ma.js":199,"./ar-sa":200,"./ar-sa.js":200,"./ar-tn":201,"./ar-tn.js":201,"./ar.js":195,"./az":202,"./az.js":202,"./be":203,"./be.js":203,"./bg":204,"./bg.js":204,"./bm":205,"./bm.js":205,"./bn":206,"./bn.js":206,"./bo":207,"./bo.js":207,"./br":208,"./br.js":208,"./bs":209,"./bs.js":209,"./ca":210,"./ca.js":210,"./cs":211,"./cs.js":211,"./cv":212,"./cv.js":212,"./cy":213,"./cy.js":213,"./da":214,"./da.js":214,"./de":215,"./de-at":216,"./de-at.js":216,"./de-ch":217,"./de-ch.js":217,"./de.js":215,"./dv":218,"./dv.js":218,"./el":219,"./el.js":219,"./en-au":220,"./en-au.js":220,"./en-ca":221,"./en-ca.js":221,"./en-gb":222,"./en-gb.js":222,"./en-ie":223,"./en-ie.js":223,"./en-il":224,"./en-il.js":224,"./en-in":225,"./en-in.js":225,"./en-nz":226,"./en-nz.js":226,"./en-sg":227,"./en-sg.js":227,"./eo":228,"./eo.js":228,"./es":229,"./es-do":230,"./es-do.js":230,"./es-us":231,"./es-us.js":231,"./es.js":229,"./et":232,"./et.js":232,"./eu":233,"./eu.js":233,"./fa":234,"./fa.js":234,"./fi":235,"./fi.js":235,"./fil":236,"./fil.js":236,"./fo":237,"./fo.js":237,"./fr":238,"./fr-ca":239,"./fr-ca.js":239,"./fr-ch":240,"./fr-ch.js":240,"./fr.js":238,"./fy":241,"./fy.js":241,"./ga":242,"./ga.js":242,"./gd":243,"./gd.js":243,"./gl":244,"./gl.js":244,"./gom-deva":245,"./gom-deva.js":245,"./gom-latn":246,"./gom-latn.js":246,"./gu":247,"./gu.js":247,"./he":248,"./he.js":248,"./hi":249,"./hi.js":249,"./hr":250,"./hr.js":250,"./hu":251,"./hu.js":251,"./hy-am":252,"./hy-am.js":252,"./id":253,"./id.js":253,"./is":254,"./is.js":254,"./it":255,"./it-ch":256,"./it-ch.js":256,"./it.js":255,"./ja":257,"./ja.js":257,"./jv":258,"./jv.js":258,"./ka":259,"./ka.js":259,"./kk":260,"./kk.js":260,"./km":261,"./km.js":261,"./kn":262,"./kn.js":262,"./ko":263,"./ko.js":263,"./ku":264,"./ku.js":264,"./ky":265,"./ky.js":265,"./lb":266,"./lb.js":266,"./lo":267,"./lo.js":267,"./lt":268,"./lt.js":268,"./lv":269,"./lv.js":269,"./me":270,"./me.js":270,"./mi":271,"./mi.js":271,"./mk":272,"./mk.js":272,"./ml":273,"./ml.js":273,"./mn":274,"./mn.js":274,"./mr":275,"./mr.js":275,"./ms":276,"./ms-my":277,"./ms-my.js":277,"./ms.js":276,"./mt":278,"./mt.js":278,"./my":279,"./my.js":279,"./nb":280,"./nb.js":280,"./ne":281,"./ne.js":281,"./nl":282,"./nl-be":283,"./nl-be.js":283,"./nl.js":282,"./nn":284,"./nn.js":284,"./oc-lnc":285,"./oc-lnc.js":285,"./pa-in":286,"./pa-in.js":286,"./pl":287,"./pl.js":287,"./pt":288,"./pt-br":289,"./pt-br.js":289,"./pt.js":288,"./ro":290,"./ro.js":290,"./ru":291,"./ru.js":291,"./sd":292,"./sd.js":292,"./se":293,"./se.js":293,"./si":294,"./si.js":294,"./sk":295,"./sk.js":295,"./sl":296,"./sl.js":296,"./sq":297,"./sq.js":297,"./sr":298,"./sr-cyrl":299,"./sr-cyrl.js":299,"./sr.js":298,"./ss":300,"./ss.js":300,"./sv":301,"./sv.js":301,"./sw":302,"./sw.js":302,"./ta":303,"./ta.js":303,"./te":304,"./te.js":304,"./tet":305,"./tet.js":305,"./tg":306,"./tg.js":306,"./th":307,"./th.js":307,"./tl-ph":308,"./tl-ph.js":308,"./tlh":309,"./tlh.js":309,"./tr":310,"./tr.js":310,"./tzl":311,"./tzl.js":311,"./tzm":312,"./tzm-latn":313,"./tzm-latn.js":313,"./tzm.js":312,"./ug-cn":314,"./ug-cn.js":314,"./uk":315,"./uk.js":315,"./ur":316,"./ur.js":316,"./uz":317,"./uz-latn":318,"./uz-latn.js":318,"./uz.js":317,"./vi":319,"./vi.js":319,"./x-pseudo":320,"./x-pseudo.js":320,"./yo":321,"./yo.js":321,"./zh-cn":322,"./zh-cn.js":322,"./zh-hk":323,"./zh-hk.js":323,"./zh-mo":324,"./zh-mo.js":324,"./zh-tw":325,"./zh-tw.js":325};function l(t){var e=r(t);return n(e)}function r(t){if(!n.o(map,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return map[t]}l.keys=function(){return Object.keys(map)},l.resolve=r,t.exports=l,l.id=342},348:function(t,e,n){"use strict";n.r(e);n(326),n(327),n(66),n(67),n(38);var l=n(5),r=n(331),o=n.n(r),c=n(347),d=c.b.reactiveProp,j={extends:c.a,mixins:[d],props:{options:{type:Object,default:function(){}}},mounted:function(){this.renderChart(this.chartData,this.options)}},h=n(13),f={components:{BarChart:Object(h.a)(j,void 0,void 0,!1,null,null,null).exports},layout:"fullpage",asyncData:function(t){return Object(l.a)(regeneratorRuntime.mark((function e(){var n,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.$axios,e.next=3,n({method:"get",url:"https://kr-latest-primary-polls-processed.s3.us-east-2.amazonaws.com/latest.json.gz"});case 3:return l=e.sent,e.abrupt("return",JSON.parse(o.a.inflate(l.data,{to:"string"})));case 5:case"end":return e.stop()}}),e)})))()},data:function(){return{colors:{},availableDateRange:[null,null],dateRange:[null,null],availableDecayFactors:[7],decayFactor:7,selectedStates:[""],selectedStateSetForLineChartData:"National Polls",scatterChartData:{},lineChartData:{},selectedCandidates:[],availableCandidates:[],availableStates:[],availableDates:[],primaryStates:[],scatterPlotSeriesForEachCandidate:[],lineChartsForEachCandidate:[]}},computed:{dateLimitedAvailableCandidates:function(){var t=this;return this.availableCandidates.filter((function(e){return!(t.dateDiff(t.dateRange[1],e.minDate)>=0||t.dateDiff(e.maxDate,t.dateRange[0])>=0)})).map((function(a){return a.candidate}))},dateLimitedAvailableStates:function(){var t=this;return this.availableStates.filter((function(e){return!(t.dateDiff(t.dateRange[1],e.minDate)>=0||t.dateDiff(e.maxDate,t.dateRange[0])>=0)})).map((function(a){return a.state}))},minAndMaxDateNullPolls:function(){return[{x:this.dateRange[0],y:null},{x:this.dateRange[1],y:null}]},chartOptions:function(){return{responsive:!0,maintainAspectRatio:!1,legend:{labels:{filter:function(t,e){return"polls"!==t.text.slice(-5)}}},scales:{xAxes:[{type:"time",distribution:"linear",time:{round:"day"}}],yAxes:[{ticks:{callback:function(t){return t.toLocaleString("en-US",{style:"percent"})},max:.75,suggestedMin:.25}}]}}},scatterPolls:function(){var t=this;return this.scatterPlotSeriesForEachCandidate.filter((function(e){return t.selectedCandidates.includes(e.label)})).map((function(e){return{type:"scatter",label:e.label,backgroundColor:t.colors[e.label].light,borderColor:t.colors[e.label].light,data:e.data.filter((function(e){return t.selectedStates.includes(e.state)})).filter((function(b){return(!t.dateRange[0]||t.dateDiff(t.dateRange[0],b.x)>=0)&&(!t.dateRange[1]||t.dateDiff(b.x,t.dateRange[1])>=0)})).map((function(t){return{x:t.x,y:t.y}})).concat(t.minAndMaxDateNullPolls),fill:!0,showLine:!1}}))},averageLines:function(){var t=this;return"off"===this.selectedStateSetForLineChartData?[]:this.lineChartsForEachCandidate.find((function(e){return e.decayFactor===t.decayFactor&&e.stateSetDescription===t.selectedStateSetForLineChartData})).lineChartData.filter((function(e){return t.selectedCandidates.includes(e.label)})).map((function(e){return{type:"scatter",label:e.label+"polls",backgroundColor:t.colors[e.label].dark,borderColor:t.colors[e.label].dark,data:e.data.filter((function(b){return(!t.dateRange[0]||t.dateDiff(t.dateRange[0],b.x)>=0)&&(!t.dateRange[1]||t.dateDiff(b.x,t.dateRange[1])>=0)})).map((function(t){return{x:t.x,y:t.y}})).concat(t.minAndMaxDateNullPolls),fill:!1,showLine:!0,pointRadius:0}}))},combinedChart:function(){return{datasets:this.averageLines.concat(this.scatterPolls)}}},watch:{selectedStates:function(){var t="off";1===this.selectedStates.length?""===this.selectedStates[0]?t="National Polls":this.lineChartsForEachCandidate.map((function(t){return t.stateSetDescription})).includes("".concat(this.selectedStates[0]," Polls"))&&(t="".concat(this.selectedStates[0]," Polls")):this.selectedStates.length===this.dateLimitedAvailableStates.length&&(t="All Polls"),this.selectedStateSetForLineChartData=t}},mounted:function(){this.setColors(),this.dateRange=[new Date(this.availableDates[0]),new Date(this.availableDates.slice(-1)[0])],this.availableDateRange=Object.assign({},this.dateRange),this.dateRange[0]=new Date("May 01 2019 00:00:00 GMT-0500 (Central Daylight Time)"),this.selectedCandidates=this.dateLimitedAvailableCandidates.slice(0,6)},methods:{setColors:function(){var t=this,e=this.generateHslColors(100);this.colors.Biden={light:"hsl(214, 51.72%, 80%)",dark:"hsl(214, 51.72%, 40%)"},this.colors.Trump={light:"hsl(328.49, 98.35%, 80%)",dark:"hsl(328.49, 98.35%, 40%)"},this.availableCandidates.forEach((function(n){n.candidate in t.colors||(t.colors[n.candidate]=e.shift())}))},dateDiff:function(t,e){return Math.floor((new Date(e)-new Date(t))/864e5)},shuffleArray:function(t){for(var i=t.length-1;i>0;i--){var e=Math.floor(Math.random()*(i+1)),n=[t[e],t[i]];t[i]=n[0],t[e]=n[1]}return t},randomVal:function(t,e){return Math.floor(Math.random()*(e-t)+1)+t},generateHslColors:function(t){for(var e=[],n=Math.trunc(360/t),i=0;i<t-5;i++){var l=i*n,s=this.randomVal(30,95);e.push({light:"hsl(".concat(l,", ").concat(s,"%,  80%)"),dark:"hsl(".concat(l,", ").concat(s,"%,  40%)")})}return e=this.shuffleArray(e)}}},m=Object(h.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"hero"},[n("section",{staticClass:"hero-body"},[n("div",{staticClass:"level"},[n("div",{staticClass:"level-item"},[n("nuxt-link",{staticClass:"button is-outlined is-primary",attrs:{to:"/"}},[t._v("\n          Home\n        ")])],1)]),t._v(" "),n("div",{staticClass:"columns is-multiline is-centered"},[n("div",{staticClass:"column is-narrow"},[n("div",{staticClass:"level"},[n("bar-chart",{ref:"chart",attrs:{"chart-data":t.combinedChart,options:t.chartOptions}})],1),t._v(" "),n("div",{staticClass:"level"},[n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-narrow"},[n("b-field",{attrs:{label:"From"}},[n("b-datepicker",{attrs:{"min-date":t.availableDateRange[0],"max-date":t.dateRange[1]},model:{value:t.dateRange[0],callback:function(e){t.$set(t.dateRange,0,e)},expression:"dateRange[0]"}})],1)],1),t._v(" "),n("div",{staticClass:"column is-narrow"},[n("b-field",{attrs:{label:"To"}},[n("b-datepicker",{attrs:{"min-date":t.availableDateRange[0],"max-date":t.availableDateRange[1]},model:{value:t.dateRange[1],callback:function(e){t.$set(t.dateRange,1,e)},expression:"dateRange[1]"}})],1)],1)])])]),t._v(" "),n("div",{staticClass:"column is-narrow"},[n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-narrow"},[n("b-field",{attrs:{label:"States"}},[n("b-select",{staticClass:"is-small",attrs:{multiple:"","native-size":"6"},model:{value:t.selectedStates,callback:function(e){t.selectedStates=e},expression:"selectedStates"}},t._l(t.dateLimitedAvailableStates,(function(e,l){return n("option",{key:l,domProps:{value:e}},[t._v("\n                  "+t._s(""==e?"U.S.":e)+"\n                ")])})),0)],1),t._v(" "),n("b-field",{attrs:{label:"Average Lines"}},[n("b-select",{staticClass:"is-small",model:{value:t.selectedStateSetForLineChartData,callback:function(e){t.selectedStateSetForLineChartData=e},expression:"selectedStateSetForLineChartData"}},[t._l(t.lineChartsForEachCandidate.map((function(t){return t.stateSetDescription})),(function(e,l){return n("option",{key:l,domProps:{value:e}},[t._v("\n                  "+t._s(e)+"\n                ")])})),t._v(" "),n("option",{attrs:{value:"off"}},[t._v("\n                  Off\n                ")])],2)],1)],1),t._v(" "),n("div",{staticClass:"column is-narrow"},[n("b-field",{attrs:{label:"Candidates"}},[n("b-select",{staticClass:"is-small",attrs:{multiple:"","native-size":"2"},model:{value:t.selectedCandidates,callback:function(e){t.selectedCandidates=e},expression:"selectedCandidates"}},t._l(t.dateLimitedAvailableCandidates,(function(e,l){return n("option",{key:l,domProps:{value:e}},[t._v("\n                  "+t._s(e)+"\n                ")])})),0)],1)],1)])])])])])}),[],!1,null,null,null);e.default=m.exports}}]);