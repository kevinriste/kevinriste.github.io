(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{343:function(t,e,n){var map={"./af":198,"./af.js":198,"./ar":199,"./ar-dz":200,"./ar-dz.js":200,"./ar-kw":201,"./ar-kw.js":201,"./ar-ly":202,"./ar-ly.js":202,"./ar-ma":203,"./ar-ma.js":203,"./ar-sa":204,"./ar-sa.js":204,"./ar-tn":205,"./ar-tn.js":205,"./ar.js":199,"./az":206,"./az.js":206,"./be":207,"./be.js":207,"./bg":208,"./bg.js":208,"./bm":209,"./bm.js":209,"./bn":210,"./bn.js":210,"./bo":211,"./bo.js":211,"./br":212,"./br.js":212,"./bs":213,"./bs.js":213,"./ca":214,"./ca.js":214,"./cs":215,"./cs.js":215,"./cv":216,"./cv.js":216,"./cy":217,"./cy.js":217,"./da":218,"./da.js":218,"./de":219,"./de-at":220,"./de-at.js":220,"./de-ch":221,"./de-ch.js":221,"./de.js":219,"./dv":222,"./dv.js":222,"./el":223,"./el.js":223,"./en-SG":224,"./en-SG.js":224,"./en-au":225,"./en-au.js":225,"./en-ca":226,"./en-ca.js":226,"./en-gb":227,"./en-gb.js":227,"./en-ie":228,"./en-ie.js":228,"./en-il":229,"./en-il.js":229,"./en-nz":230,"./en-nz.js":230,"./eo":231,"./eo.js":231,"./es":232,"./es-do":233,"./es-do.js":233,"./es-us":234,"./es-us.js":234,"./es.js":232,"./et":235,"./et.js":235,"./eu":236,"./eu.js":236,"./fa":237,"./fa.js":237,"./fi":238,"./fi.js":238,"./fo":239,"./fo.js":239,"./fr":240,"./fr-ca":241,"./fr-ca.js":241,"./fr-ch":242,"./fr-ch.js":242,"./fr.js":240,"./fy":243,"./fy.js":243,"./ga":244,"./ga.js":244,"./gd":245,"./gd.js":245,"./gl":246,"./gl.js":246,"./gom-latn":247,"./gom-latn.js":247,"./gu":248,"./gu.js":248,"./he":249,"./he.js":249,"./hi":250,"./hi.js":250,"./hr":251,"./hr.js":251,"./hu":252,"./hu.js":252,"./hy-am":253,"./hy-am.js":253,"./id":254,"./id.js":254,"./is":255,"./is.js":255,"./it":256,"./it-ch":257,"./it-ch.js":257,"./it.js":256,"./ja":258,"./ja.js":258,"./jv":259,"./jv.js":259,"./ka":260,"./ka.js":260,"./kk":261,"./kk.js":261,"./km":262,"./km.js":262,"./kn":263,"./kn.js":263,"./ko":264,"./ko.js":264,"./ku":265,"./ku.js":265,"./ky":266,"./ky.js":266,"./lb":267,"./lb.js":267,"./lo":268,"./lo.js":268,"./lt":269,"./lt.js":269,"./lv":270,"./lv.js":270,"./me":271,"./me.js":271,"./mi":272,"./mi.js":272,"./mk":273,"./mk.js":273,"./ml":274,"./ml.js":274,"./mn":275,"./mn.js":275,"./mr":276,"./mr.js":276,"./ms":277,"./ms-my":278,"./ms-my.js":278,"./ms.js":277,"./mt":279,"./mt.js":279,"./my":280,"./my.js":280,"./nb":281,"./nb.js":281,"./ne":282,"./ne.js":282,"./nl":283,"./nl-be":284,"./nl-be.js":284,"./nl.js":283,"./nn":285,"./nn.js":285,"./pa-in":286,"./pa-in.js":286,"./pl":287,"./pl.js":287,"./pt":288,"./pt-br":289,"./pt-br.js":289,"./pt.js":288,"./ro":290,"./ro.js":290,"./ru":291,"./ru.js":291,"./sd":292,"./sd.js":292,"./se":293,"./se.js":293,"./si":294,"./si.js":294,"./sk":295,"./sk.js":295,"./sl":296,"./sl.js":296,"./sq":297,"./sq.js":297,"./sr":298,"./sr-cyrl":299,"./sr-cyrl.js":299,"./sr.js":298,"./ss":300,"./ss.js":300,"./sv":301,"./sv.js":301,"./sw":302,"./sw.js":302,"./ta":303,"./ta.js":303,"./te":304,"./te.js":304,"./tet":305,"./tet.js":305,"./tg":306,"./tg.js":306,"./th":307,"./th.js":307,"./tl-ph":308,"./tl-ph.js":308,"./tlh":309,"./tlh.js":309,"./tr":310,"./tr.js":310,"./tzl":311,"./tzl.js":311,"./tzm":312,"./tzm-latn":313,"./tzm-latn.js":313,"./tzm.js":312,"./ug-cn":314,"./ug-cn.js":314,"./uk":315,"./uk.js":315,"./ur":316,"./ur.js":316,"./uz":317,"./uz-latn":318,"./uz-latn.js":318,"./uz.js":317,"./vi":319,"./vi.js":319,"./x-pseudo":320,"./x-pseudo.js":320,"./yo":321,"./yo.js":321,"./zh-cn":322,"./zh-cn.js":322,"./zh-hk":323,"./zh-hk.js":323,"./zh-tw":324,"./zh-tw.js":324};function l(t){var e=r(t);return n(e)}function r(t){if(!n.o(map,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return map[t]}l.keys=function(){return Object.keys(map)},l.resolve=r,t.exports=l,l.id=343},349:function(t,e,n){"use strict";n.r(e);n(327),n(41);var l=n(5),r=(n(328),n(73),n(75),n(332)),o=n.n(r),c=n(348),d=c.b.reactiveProp,h={extends:c.a,mixins:[d],props:{options:{type:Object,default:function(){}}},mounted:function(){this.renderChart(this.chartData,this.options)}},j=n(11),f={components:{BarChart:Object(j.a)(h,void 0,void 0,!1,null,null,null).exports},layout:"fullpage",data:function(){return{colors:{},availableDateRange:[null,null],dateRange:[null,null],availableDecayFactors:[7],decayFactor:7,selectedStates:[""],selectedStateSetForLineChartData:"National Polls",scatterChartData:{},lineChartData:{},selectedCandidates:[],availableCandidates:[],availableStates:[],availableDates:[],primaryStates:[],scatterPlotSeriesForEachCandidate:[],lineChartsForEachCandidate:[]}},computed:{dateLimitedAvailableCandidates:function(){var t=this;return this.availableCandidates.filter((function(e){return!(t.dateDiff(t.dateRange[1],e.minDate)>=0||t.dateDiff(e.maxDate,t.dateRange[0])>=0)})).map((function(a){return a.candidate}))},dateLimitedAvailableStates:function(){var t=this;return this.availableStates.filter((function(e){return!(t.dateDiff(t.dateRange[1],e.minDate)>=0||t.dateDiff(e.maxDate,t.dateRange[0])>=0)})).map((function(a){return a.state}))},minAndMaxDateNullPolls:function(){return[{x:this.dateRange[0],y:null},{x:this.dateRange[1],y:null}]},chartOptions:function(){return{responsive:!0,maintainAspectRatio:!1,legend:{labels:{filter:function(t,e){return"polls"!==t.text.slice(-5)}}},scales:{xAxes:[{type:"time",distribution:"linear",time:{round:"day"}}],yAxes:[{ticks:{callback:function(t){return t.toLocaleString("en-US",{style:"percent"})},max:.5,suggestedMin:0}}]}}},scatterPolls:function(){var t=this;return this.scatterPlotSeriesForEachCandidate.filter((function(e){return t.selectedCandidates.includes(e.label)})).map((function(e){return{type:"scatter",label:e.label,backgroundColor:t.colors[e.label].light,borderColor:t.colors[e.label].light,data:e.data.filter((function(e){return t.selectedStates.includes(e.state)})).filter((function(b){return(!t.dateRange[0]||t.dateDiff(t.dateRange[0],b.x)>=0)&&(!t.dateRange[1]||t.dateDiff(b.x,t.dateRange[1])>=0)})).map((function(t){return{x:t.x,y:t.y}})).concat(t.minAndMaxDateNullPolls),fill:!0,showLine:!1}}))},averageLines:function(){var t=this;return"off"===this.selectedStateSetForLineChartData?[]:this.lineChartsForEachCandidate.find((function(e){return e.decayFactor===t.decayFactor&&e.stateSetDescription===t.selectedStateSetForLineChartData})).lineChartData.filter((function(e){return t.selectedCandidates.includes(e.label)})).map((function(e){return{type:"scatter",label:e.label+"polls",backgroundColor:t.colors[e.label].dark,borderColor:t.colors[e.label].dark,data:e.data.filter((function(b){return(!t.dateRange[0]||t.dateDiff(t.dateRange[0],b.x)>=0)&&(!t.dateRange[1]||t.dateDiff(b.x,t.dateRange[1])>=0)})).map((function(t){return{x:t.x,y:t.y}})).concat(t.minAndMaxDateNullPolls),fill:!1,showLine:!0,pointRadius:0}}))},combinedChart:function(){return{datasets:this.averageLines.concat(this.scatterPolls)}}},watch:{selectedStates:function(){var t="off";1===this.selectedStates.length?""===this.selectedStates[0]?t="National Polls":this.lineChartsForEachCandidate.map((function(t){return t.stateSetDescription})).includes("".concat(this.selectedStates[0]," Polls"))&&(t="".concat(this.selectedStates[0]," Polls")):this.selectedStates.length===this.dateLimitedAvailableStates.length&&(t="All Polls"),this.selectedStateSetForLineChartData=t}},asyncData:function(t){var e=t.$axios;return Object(l.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e({method:"get",url:"https://kr-latest-primary-polls-processed.s3.us-east-2.amazonaws.com/latest.json.gz"});case 2:return n=t.sent,t.abrupt("return",JSON.parse(o.a.inflate(n.data,{to:"string"})));case 4:case"end":return t.stop()}}),t)})))()},mounted:function(){this.setColors(),this.dateRange=[new Date(this.availableDates[0]),new Date(this.availableDates.slice(-1)[0])],this.availableDateRange=Object.assign({},this.dateRange),this.dateRange[0]=new Date("May 01 2019 00:00:00 GMT-0500 (Central Daylight Time)"),this.selectedCandidates=this.dateLimitedAvailableCandidates.slice(0,6)},methods:{setColors:function(){var t=this,e=this.generateHslColors(100);this.colors.Biden={light:"hsl(328.49, 98.35%, 80%)",dark:"hsl(328.49, 98.35%, 40%)"},this.colors.Sanders={light:"hsl(214, 51.72%, 80%)",dark:"hsl(214, 51.72%, 40%)"},this.colors.Warren={light:"hsl(29.24, 96.75%, 80%)",dark:"hsl(29.24, 96.75%, 40%)"},this.colors.Buttigieg={light:"hsl(120, 40.66%, 80%)",dark:"hsl(120, 40.66%, 40%)"},this.colors.Klobuchar={light:"hsl(305.38, 68.72%, 80%)",dark:"hsl(305.38, 68.72%, 40%)"},this.colors.Bloomberg={light:"hsl(359.4, 79.5%, 80%)",dark:"hsl(359.4, 79.5%, 40%)"},this.availableCandidates.forEach((function(n){n.candidate in t.colors||(t.colors[n.candidate]=e.shift())}))},dateDiff:function(t,e){return Math.floor((new Date(e)-new Date(t))/864e5)},shuffleArray:function(t){for(var i=t.length-1;i>0;i--){var e=Math.floor(Math.random()*(i+1)),n=[t[e],t[i]];t[i]=n[0],t[e]=n[1]}return t},randomVal:function(t,e){return Math.floor(Math.random()*(e-t)+1)+t},generateHslColors:function(t){for(var e=[],n=Math.trunc(360/t),i=0;i<t-5;i++){var l=i*n,s=this.randomVal(30,95);e.push({light:"hsl(".concat(l,", ").concat(s,"%,  80%)"),dark:"hsl(".concat(l,", ").concat(s,"%,  40%)")})}return e=this.shuffleArray(e)}}},m=Object(j.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"hero"},[n("section",{staticClass:"hero-body"},[n("div",{staticClass:"level"},[n("div",{staticClass:"level-item"},[n("nuxt-link",{staticClass:"button is-outlined is-primary",attrs:{to:"/"}},[t._v("\n          Home\n        ")])],1)]),t._v(" "),n("div",{staticClass:"columns is-multiline is-centered"},[n("div",{staticClass:"column is-narrow"},[n("div",{staticClass:"level"},[n("bar-chart",{ref:"chart",attrs:{"chart-data":t.combinedChart,options:t.chartOptions}})],1),t._v(" "),n("div",{staticClass:"level"},[n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-narrow"},[n("b-field",{attrs:{label:"From"}},[n("b-datepicker",{attrs:{"min-date":t.availableDateRange[0],"max-date":t.dateRange[1]},model:{value:t.dateRange[0],callback:function(e){t.$set(t.dateRange,0,e)},expression:"dateRange[0]"}})],1)],1),t._v(" "),n("div",{staticClass:"column is-narrow"},[n("b-field",{attrs:{label:"To"}},[n("b-datepicker",{attrs:{"min-date":t.availableDateRange[0],"max-date":t.availableDateRange[1]},model:{value:t.dateRange[1],callback:function(e){t.$set(t.dateRange,1,e)},expression:"dateRange[1]"}})],1)],1)])])]),t._v(" "),n("div",{staticClass:"column is-narrow"},[n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-narrow"},[n("b-field",{attrs:{label:"States"}},[n("b-select",{staticClass:"is-small",attrs:{multiple:"","native-size":"6"},model:{value:t.selectedStates,callback:function(e){t.selectedStates=e},expression:"selectedStates"}},t._l(t.dateLimitedAvailableStates,(function(e,l){return n("option",{key:l,domProps:{value:e}},[t._v("\n                  "+t._s(""==e?"U.S.":e)+"\n                ")])})),0)],1),t._v(" "),n("b-field",{attrs:{label:"Average Lines"}},[n("b-select",{staticClass:"is-small",model:{value:t.selectedStateSetForLineChartData,callback:function(e){t.selectedStateSetForLineChartData=e},expression:"selectedStateSetForLineChartData"}},[t._l(t.lineChartsForEachCandidate.map((function(t){return t.stateSetDescription})),(function(e,l){return n("option",{key:l,domProps:{value:e}},[t._v("\n                  "+t._s(e)+"\n                ")])})),t._v(" "),n("option",{attrs:{value:"off"}},[t._v("\n                  Off\n                ")])],2)],1)],1),t._v(" "),n("div",{staticClass:"column is-narrow"},[n("b-field",{attrs:{label:"Candidates"}},[n("b-select",{staticClass:"is-small",attrs:{multiple:"","native-size":"10"},model:{value:t.selectedCandidates,callback:function(e){t.selectedCandidates=e},expression:"selectedCandidates"}},t._l(t.dateLimitedAvailableCandidates,(function(e,l){return n("option",{key:l,domProps:{value:e}},[t._v("\n                  "+t._s(e)+"\n                ")])})),0)],1)],1)])])])])])}),[],!1,null,null,null);e.default=m.exports}}]);