(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{183:function(t,e,n){var content=n(334);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(27).default)("7d289187",content,!0,{sourceMap:!1})},332:function(t,e,n){var map={"./af":187,"./af.js":187,"./ar":188,"./ar-dz":189,"./ar-dz.js":189,"./ar-kw":190,"./ar-kw.js":190,"./ar-ly":191,"./ar-ly.js":191,"./ar-ma":192,"./ar-ma.js":192,"./ar-sa":193,"./ar-sa.js":193,"./ar-tn":194,"./ar-tn.js":194,"./ar.js":188,"./az":195,"./az.js":195,"./be":196,"./be.js":196,"./bg":197,"./bg.js":197,"./bm":198,"./bm.js":198,"./bn":199,"./bn.js":199,"./bo":200,"./bo.js":200,"./br":201,"./br.js":201,"./bs":202,"./bs.js":202,"./ca":203,"./ca.js":203,"./cs":204,"./cs.js":204,"./cv":205,"./cv.js":205,"./cy":206,"./cy.js":206,"./da":207,"./da.js":207,"./de":208,"./de-at":209,"./de-at.js":209,"./de-ch":210,"./de-ch.js":210,"./de.js":208,"./dv":211,"./dv.js":211,"./el":212,"./el.js":212,"./en-SG":213,"./en-SG.js":213,"./en-au":214,"./en-au.js":214,"./en-ca":215,"./en-ca.js":215,"./en-gb":216,"./en-gb.js":216,"./en-ie":217,"./en-ie.js":217,"./en-il":218,"./en-il.js":218,"./en-nz":219,"./en-nz.js":219,"./eo":220,"./eo.js":220,"./es":221,"./es-do":222,"./es-do.js":222,"./es-us":223,"./es-us.js":223,"./es.js":221,"./et":224,"./et.js":224,"./eu":225,"./eu.js":225,"./fa":226,"./fa.js":226,"./fi":227,"./fi.js":227,"./fo":228,"./fo.js":228,"./fr":229,"./fr-ca":230,"./fr-ca.js":230,"./fr-ch":231,"./fr-ch.js":231,"./fr.js":229,"./fy":232,"./fy.js":232,"./ga":233,"./ga.js":233,"./gd":234,"./gd.js":234,"./gl":235,"./gl.js":235,"./gom-latn":236,"./gom-latn.js":236,"./gu":237,"./gu.js":237,"./he":238,"./he.js":238,"./hi":239,"./hi.js":239,"./hr":240,"./hr.js":240,"./hu":241,"./hu.js":241,"./hy-am":242,"./hy-am.js":242,"./id":243,"./id.js":243,"./is":244,"./is.js":244,"./it":245,"./it-ch":246,"./it-ch.js":246,"./it.js":245,"./ja":247,"./ja.js":247,"./jv":248,"./jv.js":248,"./ka":249,"./ka.js":249,"./kk":250,"./kk.js":250,"./km":251,"./km.js":251,"./kn":252,"./kn.js":252,"./ko":253,"./ko.js":253,"./ku":254,"./ku.js":254,"./ky":255,"./ky.js":255,"./lb":256,"./lb.js":256,"./lo":257,"./lo.js":257,"./lt":258,"./lt.js":258,"./lv":259,"./lv.js":259,"./me":260,"./me.js":260,"./mi":261,"./mi.js":261,"./mk":262,"./mk.js":262,"./ml":263,"./ml.js":263,"./mn":264,"./mn.js":264,"./mr":265,"./mr.js":265,"./ms":266,"./ms-my":267,"./ms-my.js":267,"./ms.js":266,"./mt":268,"./mt.js":268,"./my":269,"./my.js":269,"./nb":270,"./nb.js":270,"./ne":271,"./ne.js":271,"./nl":272,"./nl-be":273,"./nl-be.js":273,"./nl.js":272,"./nn":274,"./nn.js":274,"./pa-in":275,"./pa-in.js":275,"./pl":276,"./pl.js":276,"./pt":277,"./pt-br":278,"./pt-br.js":278,"./pt.js":277,"./ro":279,"./ro.js":279,"./ru":280,"./ru.js":280,"./sd":281,"./sd.js":281,"./se":282,"./se.js":282,"./si":283,"./si.js":283,"./sk":284,"./sk.js":284,"./sl":285,"./sl.js":285,"./sq":286,"./sq.js":286,"./sr":287,"./sr-cyrl":288,"./sr-cyrl.js":288,"./sr.js":287,"./ss":289,"./ss.js":289,"./sv":290,"./sv.js":290,"./sw":291,"./sw.js":291,"./ta":292,"./ta.js":292,"./te":293,"./te.js":293,"./tet":294,"./tet.js":294,"./tg":295,"./tg.js":295,"./th":296,"./th.js":296,"./tl-ph":297,"./tl-ph.js":297,"./tlh":298,"./tlh.js":298,"./tr":299,"./tr.js":299,"./tzl":300,"./tzl.js":300,"./tzm":301,"./tzm-latn":302,"./tzm-latn.js":302,"./tzm.js":301,"./ug-cn":303,"./ug-cn.js":303,"./uk":304,"./uk.js":304,"./ur":305,"./ur.js":305,"./uz":306,"./uz-latn":307,"./uz-latn.js":307,"./uz.js":306,"./vi":308,"./vi.js":308,"./x-pseudo":309,"./x-pseudo.js":309,"./yo":310,"./yo.js":310,"./zh-cn":311,"./zh-cn.js":311,"./zh-hk":312,"./zh-hk.js":312,"./zh-tw":313,"./zh-tw.js":313};function r(t){var e=l(t);return n(e)}function l(t){if(!n.o(map,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return map[t]}r.keys=function(){return Object.keys(map)},r.resolve=l,t.exports=r,r.id=332},333:function(t,e,n){"use strict";var r=n(183);n.n(r).a},334:function(t,e,n){(t.exports=n(26)(!1)).push([t.i,"body{height:100vh}",""])},341:function(t,e,n){"use strict";n.r(e);n(316),n(317),n(54);var r=n(6),l=(n(320),n(51),n(52),n(322),n(37),n(24),n(67),n(326),n(339)),o=(n(71),n(73),n(329)),c=n(340),d=c.b.reactiveProp,h={extends:c.a,mixins:[d],props:{options:{type:Object,default:function(){}}},mounted:function(){this.renderChart(this.chartData,this.options)}},j=n(13),f={components:{BarChart:Object(j.a)(h,void 0,void 0,!1,null,null,null).exports},layout:"fullpage",data:function(){return{fiveThirtyEightDataset:[],minWeight:0,pollsterRatings:[],jsonURL:"",pollstersURL:"",globalAverage:2.341782,decayFactor:14,selectedStates:[""],selectedCandidates:[],scatterChartData:{},lineChartData:{},weightedDataURL:"",chartOptions:{responsive:!0,maintainAspectRatio:!1,legend:{labels:{filter:function(t,e){return t.fillStyle.includes("40%)")}}},scales:{xAxes:[{type:"time",distribution:"linear",time:{round:"day"}}],yAxes:[{ticks:{suggestedMin:0,suggestedMax:.5}}]}}}},computed:{topCandidates:function(){var t=["Biden","Sanders","Harris","O'Rourke","Warren","Buttigieg","Booker","Klobuchar"],e=this.shuffleArray(this.generateHslColors(t.length));return t.map(function(a,t){return{answer:a,color:e[t]}})},availableStates:function(){return Object(l.a)(new Set(this.bidenPollsOnly.map(function(a){return a.state}))).sort()},bidenPollsOnly:function(){var t=this,e=Object(l.a)(new Set(this.pollsMapped.filter(function(a){return"Biden"==a.answer}).map(function(a){return a.question_id}))),n=this.pollsMapped.filter(function(a){return"DEM"==a.party&&t.topCandidates.map(function(a){return a.answer}).includes(a.answer)&&e.includes(a.question_id)});return n},bidenPollsOnlyStateFiltered:function(){var t=this;return this.bidenPollsOnly.filter(function(a){return t.selectedStates.includes(a.state)})},pollsMapped:function(){var t=this;return this.fiveThirtyEightDataset.map(function(a){var e=new Date(a.start_date).getTime()+(new Date(a.end_date).getTime()-new Date(a.start_date).getTime())/2,n=1.96*Math.sqrt(a.pct/100*(1-a.pct/100)/a.sample_size)*100,r=t.pollsterRatings.find(function(b){return b.Pollster==a.pollster}),l=6400*(-2^n+(t.globalAverage+!r?0:r["Predictive Plus-Minus"]))/(6400*(-2^n+t.globalAverage));return{answer:a.answer,pct:t.round(a.pct/100,4),state:a.state,question_id:a.question_id,medianDate:new Date(e),pollWeight:l,party:a.party}})},pollScatter:function(){var t=this,e=[],n=!0,r=!1,l=void 0;try{for(var o,c=function(){var n=o.value;e.push({type:"scatter",label:n.answer,backgroundColor:n.color.light,borderColor:n.color.light,data:t.bidenPollsOnly.filter(function(a){return a.answer==n.answer}).map(function(a){return{x:a.medianDate,y:t.selectedStates.includes(a.state)?a.pct:null}}),fill:!1,showLine:!1})},d=this.topCandidates[Symbol.iterator]();!(n=(o=d.next()).done);n=!0)c()}catch(t){r=!0,l=t}finally{try{n||null==d.return||d.return()}finally{if(r)throw l}}return{datasets:e}},pollsWeighted:function(){for(var t=[],dt=new Date(Math.min.apply(Math,Object(l.a)(this.bidenPollsOnly.map(function(a){return a.medianDate})))),e=new Date(Math.max.apply(Math,Object(l.a)(this.bidenPollsOnly.map(function(a){return a.medianDate}))));dt<=e;)t.push(new Date(dt)),dt.setDate(dt.getDate()+1);t.push(new Date(dt));for(var n={},r=0,o=t;r<o.length;r++){var c=o[r],d=!0,h=!1,j=void 0;try{for(var f,m=this.topCandidates[Symbol.iterator]();!(d=(f=m.next()).done);d=!0){var v=f.value;n[v.answer]||(n[v.answer]={}),n[v.answer][c]={netPct:0,netWt:0,date:c}}}catch(t){h=!0,j=t}finally{try{d||null==m.return||m.return()}finally{if(h)throw j}}var y=!0,w=!1,k=void 0;try{for(var S,x=this.bidenPollsOnlyStateFiltered[Symbol.iterator]();!(y=(S=x.next()).done);y=!0){var O=S.value,D=Math.floor((c-O.medianDate)/864e5),C=Math.pow(.5,D/this.decayFactor)*O.pollWeight;C=C<this.minWeight?0:C,C=D<0?0:C,n[O.answer][c].netPct+=C*O.pct,n[O.answer][c].netWt+=C}}catch(t){w=!0,k=t}finally{try{y||null==x.return||x.return()}finally{if(w)throw k}}}this.setWeightedDataURL(window.URL.createObjectURL(new Blob([JSON.stringify(n)],{type:"application/json"})));var z=[],M=!0,R=!1,_=void 0;try{for(var W,L=this.topCandidates[Symbol.iterator]();!(M=(W=L.next()).done);M=!0){var P=W.value;z.push({type:"scatter",label:P.answer,backgroundColor:P.color.dark,borderColor:P.color.dark,data:Object.values(n[P.answer]).map(function(a){return{x:a.date,y:0==a.netWt||0==a.netPct?null:a.netPct/a.netWt}}),pointRadius:0,fill:!1})}}catch(t){R=!0,_=t}finally{try{M||null==L.return||L.return()}finally{if(R)throw _}}return{datasets:z}},pollsScatterAndWeighted:function(){return{datasets:this.pollsWeighted.datasets.concat(this.pollScatter.datasets)}}},asyncData:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(e){var n,r,l,c,d;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.$axios,t.next=3,n({method:"get",url:"https://cors-anywhere.herokuapp.com/https://projects.fivethirtyeight.com/polls-page/president_primary_polls.csv"});case 3:return r=t.sent,t.next=6,o().fromString(r.data);case 6:return l=t.sent,t.next=9,n({method:"get",url:"https://cors-anywhere.herokuapp.com/https://raw.githubusercontent.com/fivethirtyeight/data/master/pollster-ratings/pollster-ratings.csv"});case 9:return c=t.sent,t.next=12,o().fromString(c.data);case 12:return d=t.sent,t.abrupt("return",{fiveThirtyEightDataset:l,jsonURL:window.URL.createObjectURL(new Blob([JSON.stringify(l)],{type:"application/json"})),pollsterRatings:d,pollstersURL:window.URL.createObjectURL(new Blob([JSON.stringify(d)],{type:"application/json"}))});case 14:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),methods:{shuffleArray:function(t){for(var i=t.length-1;i>0;i--){var e=Math.floor(Math.random()*(i+1)),n=[t[e],t[i]];t[i]=n[0],t[e]=n[1]}return t},setWeightedDataURL:function(t){this.weightedDataURL=t},randomVal:function(t,e){return Math.floor(Math.random()*(e-t)+1)+t},round:function(t,e){return Number(Math.round(t+"e"+e)+"e-"+e)},generateHslColors:function(t){for(var e=[],n=Math.trunc(360/t),i=0;i<t;i++){var r=i*n,s=this.randomVal(30,95);e.push({light:"hsl(".concat(r,", ").concat(s,"%,  80%)"),dark:"hsl(".concat(r,", ").concat(s,"%,  40%)")})}return e}}},m=(n(333),Object(j.a)(f,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"level"},[n("div",{staticClass:"level-item"},[n("nuxt-link",{staticClass:"button is-outlined is-primary",attrs:{to:"/"}},[t._v("\n        Home\n      ")])],1)]),t._v(" "),n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-narrow iframe-container"},[n("b-field",{attrs:{label:"States"}},[n("b-select",{attrs:{multiple:"","native-size":"8"},model:{value:t.selectedStates,callback:function(e){t.selectedStates=e},expression:"selectedStates"}},t._l(t.availableStates,function(e,r){return n("option",{key:r,domProps:{value:e}},[t._v("\n            "+t._s(""==e?"U.S.":e)+"\n          ")])}),0)],1),t._v(" "),n("b-field",{attrs:{label:"Minimum Weight"}},[n("b-numberinput",{attrs:{step:"0.05",type:"number"},model:{value:t.minWeight,callback:function(e){t.minWeight=e},expression:"minWeight"}})],1),t._v(" "),n("b-field",{attrs:{label:"Half Life"}},[n("b-numberinput",{attrs:{step:"7",type:"number"},model:{value:t.decayFactor,callback:function(e){t.decayFactor=e},expression:"decayFactor"}})],1)],1),t._v(" "),n("div",{staticClass:"column"},[n("div",{staticClass:"chart-container"},[n("bar-chart",{attrs:{"chart-data":t.pollsScatterAndWeighted,options:t.chartOptions}})],1)])])])},[],!1,null,null,null));e.default=m.exports}}]);