(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[130],{9746:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/election-2020",function(){return l(5150)}])},5150:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return O}});var a=l(5893),n=l(5582),i=l(9008),s=l.n(i),r=l(7294);let d=e=>{let{children:t,title:l}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(s(),{children:[(0,a.jsx)("title",{children:l}),(0,a.jsx)("meta",{name:"description",content:"Kevin Riste's GitHub Pages site"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,a.jsx)("main",{children:(0,a.jsx)(n.Z,{maxWidth:"xl",sx:{height:"90vh"},children:t})})]})};var c=l(1426),o=l(3321),u=l(1903),h=l(913),x=l(3841),p=l(5914),f=l(7918),j=l(9840),m=l(5071),g=l(9334),y=l(1664),Z=l.n(y),v=l(3148);l(4502);var b=l(5430),C=l(9591),D=l.n(C),w=l(6180),k=l(8433);let S=()=>({responsive:!0,maintainAspectRatio:!0,aspectRatio:1,plugins:{legend:{labels:{filter:e=>"polls"!==e.text.slice(-5)}}},scales:{x:{bounds:"data",type:"time",distribution:"linear",time:{round:"day",unit:"month"},ticks:{autoSkip:!1},grid:{offset:!1}},y:{max:.75,min:.25,ticks:{callback:e=>"string"==typeof e?e:e.toLocaleString("en-US",{style:"percent"})}}}}),M=(e,t,l,a,n,i)=>e.filter(e=>t.includes(e.label)).map(e=>({type:"scatter",label:e.label,backgroundColor:l[e.label].light,borderColor:l[e.label].light,data:e.data.filter(e=>a.includes(e.state)).filter(e=>(!n[0]||_(n[0],e.x)>=0)&&(!n[1]||_(e.x,n[1])>=0)).map(e=>({x:e.x,y:e.y})).concat(i),fill:!0,showLine:!1})),T=(e,t,l,a,n,i,s)=>{if("off"===e)return[];{let r=t.find(t=>t.decayFactor===a&&t.stateSetDescription===e);return r?r.lineChartData.filter(e=>n.includes(e.label)).map(e=>({type:"scatter",label:e.label+"polls",backgroundColor:l[e.label].dark,borderColor:l[e.label].dark,data:e.data.filter(e=>(!i[0]||_(i[0],e.x)>=0)&&(!i[1]||_(e.x,i[1])>=0)).map(e=>({x:e.x,y:e.y})).concat(s),fill:!1,showLine:!0,pointRadius:0})):[]}},_=(e,t)=>{let l=0;return e&&t&&(l=Math.floor((new Date(t).getTime()-new Date(e).getTime())/864e5)),l};var E=l(2359),P=l(6351),F=l(6437),N=l(5418);v.kL.register(v.Gu,v.De,v.uw,v.f$,v.jn,v.od,v.ho,v.FB,v.u);let L=()=>{let e={Biden:{light:"hsl(214, 51.72%, 80%)",dark:"hsl(214, 51.72%, 40%)"},Trump:{light:"hsl(328.49, 98.35%, 80%)",dark:"hsl(328.49, 98.35%, 40%)"}},[t,l]=r.useState(["Biden","Trump"]),[n,i]=r.useState([""]),[s,y]=r.useState("National Polls"),[v,C]=r.useState([null,null]),L=async e=>{let t=await (0,k.Z)({method:"get",url:e}),l=JSON.parse(D().inflate(t.data,{to:"string"}));return l.initialDate=new Date(l.availableDates[0]||""),l.finalDate=new Date(l.availableDates.slice(-1)[0]||""),l},{data:O,error:A,isLoading:G}=(0,w.Z)("https://kr-latest-primary-polls-processed.s3.us-east-2.amazonaws.com/latest.json.gz",L);A||G||null!==v[0]||null!==v[1]||C([new Date("May 01 2019 00:00:00 GMT-0500 (Central Daylight Time)"),(null==O?void 0:O.finalDate)||null]),A||G||null!==v[0]||null!==v[1]||C([new Date("May 01 2019 00:00:00 GMT-0500 (Central Daylight Time)"),(null==O?void 0:O.finalDate)||null]),A||G||null!==v[0]||null!==v[1]||C([new Date("May 01 2019 00:00:00 GMT-0500 (Central Daylight Time)"),(null==O?void 0:O.finalDate)||null]),null==O||O.initialDate,null==O||O.finalDate;let I=(null==O?void 0:O.availableCandidates.filter(e=>!(_(v[1],e.minDate)>=0)&&!(_(e.maxDate,v[0])>=0)).map(e=>e.candidate))||[],R=(null==O?void 0:O.availableStates.filter(e=>!(_(v[1],e.minDate)>=0)&&!(_(e.maxDate,v[0])>=0)).map(e=>e.state))||[],H=[{x:v[0],y:null},{x:v[1],y:null}],B=T(s,(null==O?void 0:O.lineChartsForEachCandidate)||[],e,7,t,v,H),U=M((null==O?void 0:O.scatterPlotSeriesForEachCandidate)||[],t,e,n,v,H),W={datasets:[...B,...U]},Y=e=>{C([e,v[1]])},z=e=>{C([v[0],e])},K=e=>{let t=e.target.value;y(t)},V=e=>{let{target:{value:t}}=e;l("string"==typeof t?t.split(","):t)},X=e=>{let{target:{value:t}}=e;i("string"==typeof t?t.split(","):t)};r.useEffect(()=>{let e="off";1===n.length?""===n[0]?e="National Polls":((null==O?void 0:O.lineChartsForEachCandidate)||[]).map(e=>e.stateSetDescription).includes("".concat(n[0]," Polls"))&&(e="".concat(n[0]," Polls")):n.length===R.length&&(e="All Polls"),y(e)},[n,null==O?void 0:O.lineChartsForEachCandidate,R.length]);let J=S();return(0,a.jsx)(d,{title:"2020 Election- Kevin Riste",children:(0,a.jsxs)(c.Z,{children:[(0,a.jsx)(c.Z,{container:!0,spacing:2,sx:{marginY:2},display:"flex",justifyContent:"center",alignItems:"center",children:(0,a.jsx)(c.Z,{children:(0,a.jsx)(o.Z,{href:"/",variant:"outlined",component:Z(),sx:{textTransform:"none"},children:"Home"})})}),!A&&!G&&(0,a.jsxs)(c.Z,{container:!0,children:[(0,a.jsxs)(c.Z,{xs:8,children:[(0,a.jsx)(c.Z,{display:"flex",justifyContent:"center",alignItems:"center",children:(0,a.jsx)(c.Z,{xs:6,children:(0,a.jsx)(b.kL,{type:"bar",data:W,options:J})})}),(0,a.jsx)(c.Z,{container:!0,spacing:2,sx:{marginY:2},justifyContent:"center",alignItems:"center",children:(0,a.jsxs)(E._,{dateAdapter:F.H,children:[(0,a.jsx)(c.Z,{children:(0,a.jsx)(P.O,{label:"From",inputFormat:"yyyy-MMM-dd",value:v[0],onChange:Y,renderInput:e=>(0,a.jsx)(u.Z,{...e})})}),(0,a.jsx)(c.Z,{children:(0,a.jsx)(P.O,{label:"To",inputFormat:"yyyy-MMM-dd",value:v[1],onChange:z,renderInput:e=>(0,a.jsx)(u.Z,{...e})})})]})})]}),(0,a.jsxs)(c.Z,{xs:4,children:[(0,a.jsxs)(c.Z,{container:!0,spacing:2,children:[(0,a.jsx)(c.Z,{children:(0,a.jsxs)(h.Z,{sx:{width:200},children:[(0,a.jsx)(x.Z,{children:"States"}),(0,a.jsx)(p.Z,{multiple:!0,value:n,onChange:X,label:"States",renderValue:e=>(0,a.jsx)(N.Z,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map(e=>{let t=""===e?"U.S.":e;return(0,a.jsx)(f.Z,{label:t},t)})}),children:R.map(e=>{let t=""===e?"U.S.":e;return(0,a.jsxs)(j.Z,{value:e,children:[(0,a.jsx)(m.Z,{checked:n.includes(e)}),(0,a.jsx)(g.Z,{primary:t})]},t)})})]})}),(0,a.jsx)(c.Z,{children:(0,a.jsxs)(h.Z,{sx:{width:200},children:[(0,a.jsx)(x.Z,{children:"Candidates"}),(0,a.jsx)(p.Z,{multiple:!0,value:t,onChange:V,label:"Candidates",renderValue:e=>(0,a.jsx)(N.Z,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.sort().map(e=>(0,a.jsx)(f.Z,{label:e},e))}),children:I.map(e=>(0,a.jsxs)(j.Z,{value:e,children:[(0,a.jsx)(m.Z,{checked:t.includes(e)}),(0,a.jsx)(g.Z,{primary:e})]},e))})]})})]}),(0,a.jsx)(c.Z,{sx:{marginY:2},children:(0,a.jsxs)(h.Z,{sx:{width:200},children:[(0,a.jsx)(x.Z,{children:"Average Lines"}),(0,a.jsxs)(p.Z,{value:s,label:"Average Lines",onChange:K,MenuProps:{PaperProps:{sx:{maxHeight:400}}},children:[null==O?void 0:O.lineChartsForEachCandidate.map(e=>(0,a.jsx)(j.Z,{value:e.stateSetDescription,children:e.stateSetDescription},e.stateSetDescription)),(0,a.jsx)(j.Z,{value:"off",children:"Off"})]})]})})]})]})]})})};var O=L}},function(e){e.O(0,[196,410,380,774,888,179],function(){return e(e.s=9746)}),_N_E=e.O()}]);