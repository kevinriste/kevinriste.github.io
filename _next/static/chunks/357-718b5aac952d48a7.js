"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[357],{5230:function(e,t,l){l.d(t,{Z:function(){return H}});var a=l(5893),n=l(1426),i=l(3321),s=l(913),r=l(3841),d=l(5914),c=l(7918),o=l(9840),h=l(5071),x=l(9334),u=l(1903),p=l(7294),f=l(1664),g=l.n(f),m=l(3148);l(4502);var j=l(5430),y=l(9591),Z=l.n(y),v=l(6180),b=l(8433);let C=(e,t,l)=>({responsive:!0,aspectRatio:1,plugins:{legend:{labels:{filter:e=>"polls"!==e.text.slice(-5)}}},scales:{x:{bounds:"data",type:"time",distribution:"linear",time:{round:"day",unit:"month"},ticks:{autoSkip:!1},grid:{offset:!1},min:e[0],max:e[1]},y:{max:l,min:t,ticks:{callback:e=>"string"==typeof e?e:e.toLocaleString("en-US",{style:"percent"})}}}}),D=(e,t,l,a,n,i)=>e.filter(e=>t.includes(e.label)).map(e=>({type:"scatter",label:e.label,backgroundColor:l[e.label].light,borderColor:l[e.label].light,data:e.data.filter(e=>a.includes(e.state)).filter(e=>(!n[0]||w(n[0],e.x)>=0)&&(!n[1]||w(e.x,n[1])>=0)).map(e=>({x:e.x,y:e.y})).concat(i),fill:!0,showLine:!1})),k=(e,t,l,a,n,i,s)=>{if("off"===e)return[];{let r=t.find(t=>t.decayFactor===a&&t.stateSetDescription===e);return r?r.lineChartData.filter(e=>n.includes(e.label)).map(e=>({type:"scatter",label:e.label+"polls",backgroundColor:l[e.label].dark,borderColor:l[e.label].dark,data:e.data.filter(e=>(!i[0]||w(i[0],e.x)>=0)&&(!i[1]||w(e.x,i[1])>=0)).map(e=>({x:e.x,y:e.y})).concat(s),fill:!1,showLine:!0,pointRadius:0})):[]}},w=(e,t)=>{let l=0;return e&&t&&(l=Math.floor((new Date(t).getTime()-new Date(e).getTime())/864e5)),l};var S=l(2359),M=l(6351),P=l(6437),F=l(5418);m.kL.register(m.Gu,m.De,m.uw,m.f$,m.jn,m.od,m.ho,m.FB,m.u);let E=e=>{let{processedPollsUrl:t,yMin:l,yMax:f,initialDate:m}=e,y=e=>{for(let t=e.length-1;t>0;t--){let l=Math.floor(Math.random()*(t+1));[e[t],e[l]]=[e[l],e[t]]}return e},E=(e,t)=>Math.floor(Math.random()*(t-e)+1)+e,H=p.useRef((e=>{let t=[],l=Math.trunc(360/e);for(let a=0;a<e-5;a++){let e=a*l,n=E(30,95);t.push({light:"hsl(".concat(e,", ").concat(n,"%,  80%)"),dark:"hsl(".concat(e,", ").concat(n,"%,  40%)")})}return y(t)})(100)),[T,L]=p.useState([]),[A,I]=p.useState([""]),[N,R]=p.useState("National Polls"),[_,O]=p.useState([null,null]),W=async e=>{let t=await (0,b.Z)({method:"get",url:e}),l=JSON.parse(Z().inflate(t.data,{to:"string"}));return l.initialDate=new Date(l.availableDates[0]||""),l.finalDate=new Date(l.availableDates.slice(-1)[0]||""),l},{data:B,error:G,isLoading:U}=(0,v.Z)(t,W);G||U||null!==_[0]||null!==_[1]||O([m||(null==B?void 0:B.initialDate)||null,(null==B?void 0:B.finalDate)||null]),null==B||B.initialDate,null==B||B.finalDate;let Y=((e,t)=>{if(!Array.isArray(e))return{};{let l=[...e],a={};return a.Trump={light:"hsl(328.49, 98.35%, 80%)",dark:"hsl(328.49, 98.35%, 40%)"},a.Biden={light:"hsl(214, 51.72%, 80%)",dark:"hsl(214, 51.72%, 40%)"},a.DeSantis={light:"hsl(214, 51.72%, 80%)",dark:"hsl(214, 51.72%, 40%)"},a.Haley={light:"hsl(29.24, 96.75%, 80%)",dark:"hsl(29.24, 96.75%, 40%)"},a.Pence={light:"hsl(120, 40.66%, 80%)",dark:"hsl(120, 40.66%, 40%)"},a.Cruz={light:"hsl(305.38, 68.72%, 80%)",dark:"hsl(305.38, 68.72%, 40%)"},a.Cheney={light:"hsl(359.4, 79.5%, 80%)",dark:"hsl(359.4, 79.5%, 40%)"},t.forEach(e=>{if(!(e.candidate in a)){let t=l.shift();t&&(a[e.candidate]=t)}}),a}})(H.current,(null==B?void 0:B.availableCandidates)||[]),V=(null==B?void 0:B.availableCandidates.filter(e=>!(w(_[1],e.minDate)>=0)&&!(w(e.maxDate,_[0])>=0)).map(e=>e.candidate))||[];G||U||0!==T.length||L(V.slice(0,6));let z=(null==B?void 0:B.availableStates.filter(e=>!(w(_[1],e.minDate)>=0)&&!(w(e.maxDate,_[0])>=0)).map(e=>e.state))||[],J=[{x:_[0],y:null},{x:_[1],y:null}],K=k(N,(null==B?void 0:B.lineChartsForEachCandidate)||[],Y,7,T,_,J),$=D((null==B?void 0:B.scatterPlotSeriesForEachCandidate)||[],T,Y,A,_,J),q={datasets:[...K,...$]},Q=e=>{O([e,_[1]])},X=e=>{O([_[0],e])},ee=e=>{let t=e.target.value;R(t)},et=e=>{let{target:{value:t}}=e;L("string"==typeof t?t.split(","):t)},el=e=>{let{target:{value:t}}=e;I("string"==typeof t?t.split(","):t)},ea=()=>{L(["Biden","Trump"]),I([""]),O([new Date("May 01 2019 00:00:00 GMT-0500 (Central Daylight Time)"),(null==B?void 0:B.finalDate)||null])};p.useEffect(()=>{let e="off";1===A.length?""===A[0]?e="National Polls":((null==B?void 0:B.lineChartsForEachCandidate)||[]).map(e=>e.stateSetDescription).includes("".concat(A[0]," Polls"))&&(e="".concat(A[0]," Polls")):A.length===z.length&&(e="All Polls"),R(e)},[A,null==B?void 0:B.lineChartsForEachCandidate,z.length]);let en=C(_,l,f);return(0,a.jsxs)(n.Z,{children:[(0,a.jsx)(n.Z,{container:!0,spacing:2,sx:{marginY:2},display:"flex",justifyContent:"center",alignItems:"center",children:(0,a.jsx)(n.Z,{children:(0,a.jsx)(i.Z,{href:"/",variant:"outlined",component:g(),sx:{textTransform:"none"},children:"Home"})})}),!G&&!U&&(0,a.jsxs)(n.Z,{container:!0,children:[(0,a.jsx)(n.Z,{xs:12,display:"flex",justifyContent:"center",alignItems:"center",children:(0,a.jsx)(j.kL,{type:"bar",data:q,options:en,style:{maxHeight:400,maxWidth:400}})}),(0,a.jsxs)(n.Z,{xs:12,sx:{marginY:2},container:!0,spacing:2,display:"flex",justifyContent:"center",children:[(0,a.jsx)(n.Z,{children:(0,a.jsxs)(s.Z,{sx:{width:200},children:[(0,a.jsx)(r.Z,{children:"States"}),(0,a.jsx)(d.Z,{multiple:!0,value:A,onChange:el,label:"States",MenuProps:{PaperProps:{sx:{maxHeight:400}}},renderValue:e=>(0,a.jsx)(F.Z,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map(e=>{let t=""===e?"U.S.":e;return(0,a.jsx)(c.Z,{label:t},t)})}),children:z.map(e=>{let t=""===e?"U.S.":e;return(0,a.jsxs)(o.Z,{value:e,children:[(0,a.jsx)(h.Z,{checked:A.includes(e)}),(0,a.jsx)(x.Z,{primary:t})]},t)})})]})}),(0,a.jsx)(n.Z,{children:(0,a.jsxs)(s.Z,{sx:{width:200},children:[(0,a.jsx)(r.Z,{children:"Candidates"}),(0,a.jsx)(d.Z,{multiple:!0,value:T,onChange:et,label:"Candidates",MenuProps:{PaperProps:{sx:{maxHeight:400}}},renderValue:e=>(0,a.jsx)(F.Z,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map(e=>(0,a.jsx)(c.Z,{label:e},e))}),children:V.map(e=>(0,a.jsxs)(o.Z,{value:e,children:[(0,a.jsx)(h.Z,{checked:T.includes(e)}),(0,a.jsx)(x.Z,{primary:e})]},e))})]})}),(0,a.jsx)(n.Z,{children:(0,a.jsxs)(s.Z,{sx:{width:200},children:[(0,a.jsx)(r.Z,{children:"Average Lines"}),(0,a.jsxs)(d.Z,{value:N,label:"Average Lines",onChange:ee,MenuProps:{PaperProps:{sx:{maxHeight:400}}},sx:{minHeight:65},children:[null==B?void 0:B.lineChartsForEachCandidate.map(e=>(0,a.jsx)(o.Z,{value:e.stateSetDescription,children:e.stateSetDescription},e.stateSetDescription)),(0,a.jsx)(o.Z,{value:"off",children:"Off"})]})]})})]}),(0,a.jsx)(n.Z,{xs:12,container:!0,spacing:2,justifyContent:"center",alignItems:"center",children:(0,a.jsxs)(S._,{dateAdapter:P.H,children:[(0,a.jsx)(n.Z,{children:(0,a.jsx)(M.O,{label:"From",inputFormat:"yyyy-MMM-dd",value:_[0],onChange:Q,renderInput:e=>(0,a.jsx)(u.Z,{sx:{width:200},...e})})}),(0,a.jsx)(n.Z,{children:(0,a.jsx)(M.O,{label:"To",inputFormat:"yyyy-MMM-dd",value:_[1],onChange:X,renderInput:e=>(0,a.jsx)(u.Z,{sx:{width:200},...e})})})]})}),(0,a.jsx)(n.Z,{xs:12,container:!0,spacing:2,sx:{marginY:2},display:"flex",justifyContent:"center",alignItems:"center",children:(0,a.jsx)(n.Z,{children:(0,a.jsx)(i.Z,{variant:"outlined",onClick:ea,sx:{textTransform:"none"},children:"Reset"})})})]})]})};var H=E},510:function(e,t,l){var a=l(5893),n=l(5582),i=l(9008),s=l.n(i);l(7294);let r=e=>{let{children:t,title:l}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(s(),{children:[(0,a.jsx)("title",{children:l}),(0,a.jsx)("meta",{name:"description",content:"Kevin Riste's GitHub Pages site"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,a.jsx)("main",{children:(0,a.jsx)(n.Z,{maxWidth:"xl",sx:{height:"90vh"},children:t})})]})};t.Z=r}}]);