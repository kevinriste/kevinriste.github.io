"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[357],{5230:function(e,t,l){l.d(t,{Z:function(){return I}});var a=l(5893),n=l(1426),i=l(3321),s=l(913),r=l(3841),d=l(5914),c=l(7918),o=l(9840),h=l(5071),x=l(9334),u=l(1903),p=l(8456),f=l(5861),g=l(7294),j=l(1664),m=l.n(j),Z=l(3148);l(4502);var y=l(5430),v=l(9591),C=l.n(v),b=l(6180),k=l(8433);let D=(e,t,l)=>({responsive:!0,aspectRatio:1,plugins:{legend:{labels:{filter:e=>"polls"!==e.text.slice(-5)}}},scales:{x:{bounds:"data",type:"time",distribution:"linear",time:{round:"day",unit:"month"},ticks:{autoSkip:!1},grid:{offset:!1},min:e[0],max:e[1]},y:{max:l,min:t,ticks:{callback:e=>"string"==typeof e?e:e.toLocaleString("en-US",{style:"percent"})}}}}),w=(e,t,l,a,n,i)=>e.filter(e=>t.includes(e.label)).map(e=>({type:"scatter",label:e.label,backgroundColor:l[e.label].light,borderColor:l[e.label].light,data:e.data.filter(e=>a.includes(e.state)).filter(e=>(!n[0]||M(n[0],e.x)>=0)&&(!n[1]||M(e.x,n[1])>=0)).map(e=>({x:e.x,y:e.y})).concat(i),fill:!0,showLine:!1})),S=(e,t,l,a,n,i,s)=>{if("off"===e)return[];{let r=t.find(t=>t.decayFactor===a&&t.stateSetDescription===e);return r?r.lineChartData.filter(e=>n.includes(e.label)).map(e=>({type:"scatter",label:e.label+"polls",backgroundColor:l[e.label].dark,borderColor:l[e.label].dark,data:e.data.filter(e=>(!i[0]||M(i[0],e.x)>=0)&&(!i[1]||M(e.x,i[1])>=0)).map(e=>({x:e.x,y:e.y})).concat(s),fill:!1,showLine:!0,pointRadius:0})):[]}},M=(e,t)=>{let l=0;return e&&t&&(l=Math.floor((new Date(t).getTime()-new Date(e).getTime())/864e5)),l};var P=l(2359),F=l(6351),E=l(6437),H=l(5418);Z.kL.register(Z.Gu,Z.De,Z.uw,Z.f$,Z.jn,Z.od,Z.ho,Z.FB,Z.u);let T=e=>{let{processedPollsUrl:t,yMin:l,yMax:j,initialDate:Z}=e,v=e=>{for(let t=e.length-1;t>0;t--){let l=Math.floor(Math.random()*(t+1));[e[t],e[l]]=[e[l],e[t]]}return e},T=(e,t)=>Math.floor(Math.random()*(t-e)+1)+e,I=g.useRef((e=>{let t=[],l=Math.trunc(360/e);for(let a=0;a<e-5;a++){let e=a*l,n=T(30,95);t.push({light:"hsl(".concat(e,", ").concat(n,"%,  80%)"),dark:"hsl(".concat(e,", ").concat(n,"%,  40%)")})}return v(t)})(100)),[L,A]=g.useState([]),[N,R]=g.useState([""]),[_,G]=g.useState("National Polls"),[O,W]=g.useState([null,null]),Y=async e=>{let t=await (0,k.Z)({method:"get",url:e}),l=JSON.parse(C().inflate(t.data,{to:"string"}));return l.initialDate=new Date(l.availableDates[0]||""),l.finalDate=new Date(l.availableDates.slice(-1)[0]||""),l},{data:B,error:U,isLoading:V}=(0,b.Z)(t,Y);U||V||null!==O[0]||null!==O[1]||W([Z||(null==B?void 0:B.initialDate)||null,(null==B?void 0:B.finalDate)||null]),null==B||B.initialDate,null==B||B.finalDate;let z=((e,t)=>{if(!Array.isArray(e))return{};{let l=[...e],a={};return a.Trump={light:"hsl(328.49, 98.35%, 80%)",dark:"hsl(328.49, 98.35%, 40%)"},a.Biden={light:"hsl(214, 51.72%, 80%)",dark:"hsl(214, 51.72%, 40%)"},a.DeSantis={light:"hsl(214, 51.72%, 80%)",dark:"hsl(214, 51.72%, 40%)"},a.Haley={light:"hsl(29.24, 96.75%, 80%)",dark:"hsl(29.24, 96.75%, 40%)"},a.Pence={light:"hsl(120, 40.66%, 80%)",dark:"hsl(120, 40.66%, 40%)"},a.Cruz={light:"hsl(305.38, 68.72%, 80%)",dark:"hsl(305.38, 68.72%, 40%)"},a.Cheney={light:"hsl(359.4, 79.5%, 80%)",dark:"hsl(359.4, 79.5%, 40%)"},t.forEach(e=>{if(!(e.candidate in a)){let t=l.shift();t&&(a[e.candidate]=t)}}),a}})(I.current,(null==B?void 0:B.availableCandidates)||[]),J=(null==B?void 0:B.availableCandidates.filter(e=>!(M(O[1],e.minDate)>=0)&&!(M(e.maxDate,O[0])>=0)).map(e=>e.candidate))||[];U||V||0!==L.length||A(J.slice(0,6));let K=(null==B?void 0:B.availableStates.filter(e=>!(M(O[1],e.minDate)>=0)&&!(M(e.maxDate,O[0])>=0)).map(e=>e.state))||[],$=[{x:O[0],y:null},{x:O[1],y:null}],q=S(_,(null==B?void 0:B.lineChartsForEachCandidate)||[],z,7,L,O,$),Q=w((null==B?void 0:B.scatterPlotSeriesForEachCandidate)||[],L,z,N,O,$),X={datasets:[...q,...Q]},ee=e=>{W([e,O[1]])},et=e=>{W([O[0],e])},el=e=>{let t=e.target.value;G(t)},ea=e=>{let{target:{value:t}}=e;A("string"==typeof t?t.split(","):t)},en=e=>{let{target:{value:t}}=e;R("string"==typeof t?t.split(","):t)},ei=()=>{A(["Biden","Trump"]),R([""]),W([new Date("May 01 2019 00:00:00 GMT-0500 (Central Daylight Time)"),(null==B?void 0:B.finalDate)||null])};g.useEffect(()=>{let e="off";1===N.length?""===N[0]?e="National Polls":((null==B?void 0:B.lineChartsForEachCandidate)||[]).map(e=>e.stateSetDescription).includes("".concat(N[0]," Polls"))&&(e="".concat(N[0]," Polls")):N.length===K.length&&(e="All Polls"),G(e)},[N,null==B?void 0:B.lineChartsForEachCandidate,K.length]);let es=D(O,l,j);return(0,a.jsxs)(n.Z,{children:[(0,a.jsx)(n.Z,{container:!0,spacing:2,sx:{marginY:2},display:"flex",justifyContent:"center",alignItems:"center",children:(0,a.jsx)(n.Z,{children:(0,a.jsx)(i.Z,{href:"/",variant:"outlined",component:m(),sx:{textTransform:"none"},children:"Home"})})}),U||V?(0,a.jsxs)(n.Z,{children:[(0,a.jsx)(n.Z,{container:!0,spacing:2,display:"flex",justifyContent:"center",alignItems:"center",children:(0,a.jsx)(n.Z,{children:(0,a.jsx)(p.Z,{disableShrink:!0,sx:{marginY:6}})})}),(0,a.jsx)(n.Z,{container:!0,spacing:2,display:"flex",justifyContent:"center",alignItems:"center",children:(0,a.jsx)(n.Z,{children:(0,a.jsx)(f.Z,{children:"Getting latest data..."})})})]}):(0,a.jsxs)(n.Z,{container:!0,children:[(0,a.jsx)(n.Z,{xs:12,display:"flex",justifyContent:"center",alignItems:"center",children:(0,a.jsx)(y.kL,{type:"bar",data:X,options:es,style:{maxHeight:400,maxWidth:400}})}),(0,a.jsxs)(n.Z,{xs:12,sx:{marginY:2},container:!0,spacing:2,display:"flex",justifyContent:"center",children:[(0,a.jsx)(n.Z,{children:(0,a.jsxs)(s.Z,{sx:{width:200},children:[(0,a.jsx)(r.Z,{children:"States"}),(0,a.jsx)(d.Z,{multiple:!0,value:N,onChange:en,label:"States",MenuProps:{PaperProps:{sx:{maxHeight:400}}},renderValue:e=>(0,a.jsx)(H.Z,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map(e=>{let t=""===e?"U.S.":e;return(0,a.jsx)(c.Z,{label:t},t)})}),children:K.map(e=>{let t=""===e?"U.S.":e;return(0,a.jsxs)(o.Z,{value:e,children:[(0,a.jsx)(h.Z,{checked:N.includes(e)}),(0,a.jsx)(x.Z,{primary:t})]},t)})})]})}),(0,a.jsx)(n.Z,{children:(0,a.jsxs)(s.Z,{sx:{width:200},children:[(0,a.jsx)(r.Z,{children:"Candidates"}),(0,a.jsx)(d.Z,{multiple:!0,value:L,onChange:ea,label:"Candidates",MenuProps:{PaperProps:{sx:{maxHeight:400}}},renderValue:e=>(0,a.jsx)(H.Z,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map(e=>(0,a.jsx)(c.Z,{label:e},e))}),children:J.map(e=>(0,a.jsxs)(o.Z,{value:e,children:[(0,a.jsx)(h.Z,{checked:L.includes(e)}),(0,a.jsx)(x.Z,{primary:e})]},e))})]})}),(0,a.jsx)(n.Z,{children:(0,a.jsxs)(s.Z,{sx:{width:200},children:[(0,a.jsx)(r.Z,{children:"Average Lines"}),(0,a.jsxs)(d.Z,{value:_,label:"Average Lines",onChange:el,MenuProps:{PaperProps:{sx:{maxHeight:400}}},sx:{minHeight:65},children:[null==B?void 0:B.lineChartsForEachCandidate.map(e=>(0,a.jsx)(o.Z,{value:e.stateSetDescription,children:e.stateSetDescription},e.stateSetDescription)),(0,a.jsx)(o.Z,{value:"off",children:"Off"})]})]})})]}),(0,a.jsx)(n.Z,{xs:12,container:!0,spacing:2,justifyContent:"center",alignItems:"center",children:(0,a.jsxs)(P._,{dateAdapter:E.H,children:[(0,a.jsx)(n.Z,{children:(0,a.jsx)(F.O,{label:"From",inputFormat:"yyyy-MMM-dd",value:O[0],onChange:ee,renderInput:e=>(0,a.jsx)(u.Z,{sx:{width:200},...e})})}),(0,a.jsx)(n.Z,{children:(0,a.jsx)(F.O,{label:"To",inputFormat:"yyyy-MMM-dd",value:O[1],onChange:et,renderInput:e=>(0,a.jsx)(u.Z,{sx:{width:200},...e})})})]})}),(0,a.jsx)(n.Z,{xs:12,container:!0,spacing:2,sx:{marginY:2},display:"flex",justifyContent:"center",alignItems:"center",children:(0,a.jsx)(n.Z,{children:(0,a.jsx)(i.Z,{variant:"outlined",onClick:ei,sx:{textTransform:"none"},children:"Reset"})})})]})]})};var I=T},510:function(e,t,l){var a=l(5893),n=l(5582),i=l(9008),s=l.n(i);l(7294);let r=e=>{let{children:t,title:l}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(s(),{children:[(0,a.jsx)("title",{children:l}),(0,a.jsx)("meta",{name:"description",content:"Kevin Riste's GitHub Pages site"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,a.jsx)("main",{children:(0,a.jsx)(n.Z,{maxWidth:"xl",sx:{height:"90vh"},children:t})})]})};t.Z=r}}]);