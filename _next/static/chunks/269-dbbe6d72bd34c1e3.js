"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[269],{1114:function(e,t,n){var a=n(5893),l=n(1426),i=n(3321),r=n(1664),s=n.n(r),c=n(1163);t.Z=()=>{let e=(0,c.useRouter)();return(0,a.jsxs)(l.Z,{container:!0,spacing:2,children:["/election-2024"!==e.pathname&&(0,a.jsx)(l.Z,{xs:12,container:!0,spacing:2,display:"flex",justifyContent:"center",alignItems:"center",children:(0,a.jsx)(l.Z,{children:(0,a.jsx)(i.Z,{href:"/election-2024",variant:"outlined",component:s(),sx:{textTransform:"none"},children:"2024 General Election"})})}),"/election-2024-republican"!==e.pathname&&(0,a.jsx)(l.Z,{xs:12,container:!0,spacing:2,display:"flex",justifyContent:"center",alignItems:"center",children:(0,a.jsx)(l.Z,{children:(0,a.jsx)(i.Z,{href:"/election-2024-republican",variant:"outlined",component:s(),sx:{textTransform:"none"},children:"2024 Republican Primary"})})}),"/election-2024-democrat"!==e.pathname&&(0,a.jsx)(l.Z,{xs:12,container:!0,spacing:2,display:"flex",justifyContent:"center",alignItems:"center",children:(0,a.jsx)(l.Z,{children:(0,a.jsx)(i.Z,{href:"/election-2024-democrat",variant:"outlined",component:s(),sx:{textTransform:"none"},children:"2024 Democratic Primary"})})}),"/election-2020"!==e.pathname&&(0,a.jsx)(l.Z,{xs:12,container:!0,spacing:2,display:"flex",justifyContent:"center",alignItems:"center",children:(0,a.jsx)(l.Z,{children:(0,a.jsx)(i.Z,{href:"/election-2020",variant:"outlined",component:s(),sx:{textTransform:"none"},children:"2020 General Election"})})})]})}},5508:function(e,t,n){n.d(t,{Z:function(){return components_PollingChart}});var a=n(5893),l=n(1426),i=n(3321),r=n(1737),s=n(8456),c=n(5861),o=n(913),d=n(3841),h=n(5914),x=n(7918),u=n(9840),f=n(5071),p=n(9334),m=n(1903),j=n(7294),g=n(1664),Z=n.n(g),y=n(3148);n(4502);var v=n(6495),b=n(7885);let chartOptions=(e,t,n)=>({responsive:!0,aspectRatio:1,plugins:{legend:{labels:{filter:e=>"polls"!==e.text.slice(-5)}}},scales:{x:{bounds:"data",type:"time",distribution:"linear",time:{round:"day",unit:"month"},ticks:{autoSkip:!1},grid:{offset:!1},min:e[0],max:e[1]},y:{max:n,min:t,ticks:{callback:e=>"string"==typeof e?e:e.toLocaleString("en-US",{style:"percent"})}}}}),calculateScatterPolls=(e,t,n,a,l,i)=>e.filter(e=>t.includes(e.label)).map(e=>({type:"scatter",label:e.label,backgroundColor:n[e.label].light,borderColor:n[e.label].light,data:e.data.filter(e=>a.includes(e.state)).filter(e=>(!l[0]||dateDiff(l[0],e.x)>=0)&&(!l[1]||dateDiff(e.x,l[1])>=0)).map(e=>({x:e.x,y:e.y})).concat(i),fill:!0,showLine:!1})),calculateAverageLines=(e,t,n,a,l,i,r)=>{if("off"===e)return[];{let s=t.find(t=>t.decayFactor===a&&t.stateSetDescription===e);return s?s.lineChartData.filter(e=>l.includes(e.label)).map(e=>({type:"scatter",label:e.label+"polls",backgroundColor:n[e.label].dark,borderColor:n[e.label].dark,data:e.data.filter(e=>(!i[0]||dateDiff(i[0],e.x)>=0)&&(!i[1]||dateDiff(e.x,i[1])>=0)).map(e=>({x:e.x,y:e.y})).concat(r),fill:!1,showLine:!0,pointRadius:0})):[]}},dateDiff=(e,t)=>{let n=0;return e&&t&&(n=Math.floor((new Date(t).getTime()-new Date(e).getTime())/864e5)),n};var C=n(2359),D=n(5374),k=n(6437),w=n(5418),S=n(1114);y.kL.register(y.Gu,y.De,y.uw,y.f$,y.jn,y.od,y.ho,y.FB,y.u);var components_PollingChart=e=>{let{processedPollsUrl:t,yMin:n,yMax:g,initialDate:y,initialNumberOfCandidates:P}=e,shuffleArray=e=>{for(let t=e.length-1;t>0;t--){let n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e},randomVal=(e,t)=>Math.floor(Math.random()*(t-e)+1)+e,E=j.useRef((e=>{let t=[],n=Math.trunc(360/e);for(let a=0;a<e-5;a++){let e=a*n,l=randomVal(30,95);t.push({light:"hsl(".concat(e,", ").concat(l,"%,  80%)"),dark:"hsl(".concat(e,", ").concat(l,"%,  40%)")})}return shuffleArray(t)})(100)),[M,F]=j.useState([]),[I,T]=j.useState([""]),[A,H]=j.useState("National Polls"),[L,R]=j.useState([null,null]),[N,O]=j.useState(void 0),[_,B]=j.useState(void 0),G=j.useRef(!1);j.useEffect(()=>{let fetchData=async()=>{if(!G.current)try{let e=await fetch(t);if(!e.ok){let t="Network response was not ok: ".concat(e.status," (").concat(e.statusText,")");try{let n=await e.json();t+=" - ".concat(JSON.stringify(n))}catch(e){console.error("Error reading response body:",e)}throw Error(t)}let n=await e.arrayBuffer(),a=JSON.parse(b.ZP.inflate(n,{to:"string"}));a.initialDate=new Date(a.availableDates[0]||""),a.finalDate=new Date(a.availableDates.slice(-1)[0]||""),O(a)}catch(e){console.error(e),B("An error occurred")}};fetchData(),G.current=!0},[t]),!_&&G.current&&null===L[0]&&null===L[1]&&R([y||(null==N?void 0:N.initialDate)||null,(null==N?void 0:N.finalDate)||null]);let Y=[null==N?void 0:N.initialDate,null==N?void 0:N.finalDate],V=((e,t)=>{if(!Array.isArray(e))return{};{var n,a;let l=[...e],i={},r=t.slice(0,6),s=[{light:"hsl(214, 51.72%, 80%)",dark:"hsl(214, 51.72%, 40%)"},{light:"hsl(328.49, 98.35%, 80%)",dark:"hsl(328.49, 98.35%, 40%)"},{light:"hsl(29.24, 96.75%, 80%)",dark:"hsl(29.24, 96.75%, 40%)"},{light:"hsl(120, 40.66%, 80%)",dark:"hsl(120, 40.66%, 40%)"},{light:"hsl(305.38, 68.72%, 80%)",dark:"hsl(305.38, 68.72%, 40%)"},{light:"hsl(359.4, 79.5%, 80%)",dark:"hsl(359.4, 79.5%, 40%)"}];return r.forEach((e,t)=>{i[e.candidate]=s[t]}),(null===(n=r.slice(0,1).pop())||void 0===n?void 0:n.candidate)==="Trump"&&(null===(a=r.slice(1,2).pop())||void 0===a?void 0:a.candidate)==="Biden"&&(i.Trump=s[1],i.Biden=s[0]),t.forEach(e=>{if(!(e.candidate in i)){let t=l.shift();t&&(i[e.candidate]=t)}}),i}})(E.current,(null==N?void 0:N.availableCandidates)||[]),W=(null==N?void 0:N.availableCandidates.filter(e=>!(dateDiff(L[1],e.minDate)>=0)&&!(dateDiff(e.maxDate,L[0])>=0)).map(e=>e.candidate))||[];!_&&G.current&&0===M.length&&F(W.slice(0,null!=P?P:6));let U=(null==N?void 0:N.availableStates.filter(e=>!(dateDiff(L[1],e.minDate)>=0)&&!(dateDiff(e.maxDate,L[0])>=0)).map(e=>e.state))||[],J=[{x:L[0],y:null},{x:L[1],y:null}],K=calculateAverageLines(A,(null==N?void 0:N.lineChartsForEachCandidate)||[],V,7,M,L,J),$=calculateScatterPolls((null==N?void 0:N.scatterPlotSeriesForEachCandidate)||[],M,V,I,L,J),q={datasets:[...K,...$]};j.useEffect(()=>{let e="off";1===I.length?""===I[0]?e="National Polls":((null==N?void 0:N.lineChartsForEachCandidate)||[]).map(e=>e.stateSetDescription).includes("".concat(I[0]," Polls"))&&(e="".concat(I[0]," Polls")):I.length===U.length&&(e="All Polls"),H(e)},[I,null==N?void 0:N.lineChartsForEachCandidate,U.length]);let z=chartOptions(L,n,g);return(0,a.jsxs)(l.Z,{children:[(0,a.jsx)(l.Z,{container:!0,spacing:2,sx:{marginY:2},display:"flex",justifyContent:"center",alignItems:"center",children:(0,a.jsx)(l.Z,{children:(0,a.jsx)(i.Z,{href:"/",variant:"outlined",component:Z(),sx:{textTransform:"none"},children:"Home"})})}),_?(0,a.jsx)(l.Z,{children:(0,a.jsx)(l.Z,{container:!0,spacing:2,display:"flex",justifyContent:"center",alignItems:"center",children:(0,a.jsx)(l.Z,{children:(0,a.jsx)(r.Z,{severity:"error",sx:{marginY:6},children:_})})})}):G.current?(0,a.jsxs)(l.Z,{container:!0,children:[(0,a.jsx)(l.Z,{xs:12,display:"flex",justifyContent:"center",alignItems:"center",children:(0,a.jsx)(v.kL,{type:"bar",data:q,options:z,style:{maxHeight:400,maxWidth:400}})}),(0,a.jsxs)(l.Z,{xs:12,sx:{marginY:2},container:!0,spacing:2,display:"flex",justifyContent:"center",children:[(0,a.jsx)(l.Z,{children:(0,a.jsxs)(o.Z,{sx:{width:200},children:[(0,a.jsx)(d.Z,{children:"States"}),(0,a.jsx)(h.Z,{multiple:!0,value:I,onChange:e=>{let{target:{value:t}}=e;T("string"==typeof t?t.split(","):t)},label:"States",MenuProps:{PaperProps:{sx:{maxHeight:400}}},renderValue:e=>(0,a.jsx)(w.Z,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map(e=>{let t=""===e?"U.S.":e;return(0,a.jsx)(x.Z,{label:t},t)})}),children:U.map(e=>{let t=""===e?"U.S.":e;return(0,a.jsxs)(u.Z,{value:e,children:[(0,a.jsx)(f.Z,{checked:I.includes(e)}),(0,a.jsx)(p.Z,{primary:t})]},t)})})]})}),(0,a.jsx)(l.Z,{children:(0,a.jsxs)(o.Z,{sx:{width:200},children:[(0,a.jsx)(d.Z,{children:"Candidates"}),(0,a.jsx)(h.Z,{multiple:!0,value:M,onChange:e=>{let{target:{value:t}}=e;F("string"==typeof t?t.split(","):t)},label:"Candidates",MenuProps:{PaperProps:{sx:{maxHeight:400}}},renderValue:e=>(0,a.jsx)(w.Z,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map(e=>(0,a.jsx)(x.Z,{label:e},e))}),children:W.map(e=>(0,a.jsxs)(u.Z,{value:e,children:[(0,a.jsx)(f.Z,{checked:M.includes(e)}),(0,a.jsx)(p.Z,{primary:e})]},e))})]})}),(0,a.jsx)(l.Z,{children:(0,a.jsxs)(o.Z,{sx:{width:200},children:[(0,a.jsx)(d.Z,{children:"Average Lines"}),(0,a.jsxs)(h.Z,{value:A,label:"Average Lines",onChange:e=>{let t=e.target.value;H(t)},MenuProps:{PaperProps:{sx:{maxHeight:400}}},sx:{minHeight:65},children:[null==N?void 0:N.lineChartsForEachCandidate.map(e=>(0,a.jsx)(u.Z,{value:e.stateSetDescription,children:e.stateSetDescription},e.stateSetDescription)),(0,a.jsx)(u.Z,{value:"off",children:"Off"})]})]})})]}),(0,a.jsx)(l.Z,{xs:12,container:!0,spacing:2,justifyContent:"center",alignItems:"center",children:(0,a.jsxs)(C._,{dateAdapter:k.H,children:[(0,a.jsx)(l.Z,{children:(0,a.jsx)(D.O,{label:"From",inputFormat:"yyyy-MMM-dd",value:L[0],onChange:e=>{R([e,L[1]])},renderInput:e=>(0,a.jsx)(m.Z,{sx:{width:200},...e}),disableFuture:!0,minDate:Y[0]||void 0})}),(0,a.jsx)(l.Z,{children:(0,a.jsx)(D.O,{label:"To",inputFormat:"yyyy-MMM-dd",value:L[1],onChange:e=>{R([L[0],e])},renderInput:e=>(0,a.jsx)(m.Z,{sx:{width:200},...e}),disableFuture:!0,minDate:Y[0]||void 0})})]})}),(0,a.jsx)(l.Z,{xs:12,container:!0,spacing:2,sx:{marginY:2},display:"flex",justifyContent:"center",alignItems:"center",children:(0,a.jsx)(l.Z,{children:(0,a.jsx)(i.Z,{variant:"outlined",onClick:()=>{R([null,null]),F([]),T([""])},sx:{textTransform:"none"},children:"Reset"})})})]}):(0,a.jsxs)(l.Z,{children:[(0,a.jsx)(l.Z,{container:!0,spacing:2,display:"flex",justifyContent:"center",alignItems:"center",children:(0,a.jsx)(l.Z,{children:(0,a.jsx)(s.Z,{disableShrink:!0,sx:{marginY:6}})})}),(0,a.jsx)(l.Z,{container:!0,spacing:2,display:"flex",justifyContent:"center",alignItems:"center",children:(0,a.jsx)(l.Z,{children:(0,a.jsx)(c.Z,{children:"Getting latest data..."})})})]}),(0,a.jsx)(l.Z,{sx:{marginTop:4},children:(0,a.jsx)(S.Z,{})})]})}},3119:function(e,t,n){var a=n(5893),l=n(5582),i=n(9008),r=n.n(i);n(7294),t.Z=e=>{let{children:t,title:n}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(r(),{children:[(0,a.jsx)("title",{children:n}),(0,a.jsx)("meta",{name:"description",content:"Kevin Riste's GitHub Pages site"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,a.jsx)("main",{children:(0,a.jsx)(l.Z,{maxWidth:"xl",sx:{minHeight:"90vh",marginBottom:4},children:t})})]})}}}]);